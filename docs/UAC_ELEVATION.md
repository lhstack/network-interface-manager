# UAC权限提升功能

## 功能概述

当应用在Windows上以普通用户身份运行时，会自动触发UAC（用户账户控制）对话框，要求用户提升权限到管理员级别。

## 工作原理

### Windows
1. 应用启动时检查是否具有管理员权限
2. 如果没有管理员权限，使用 `ShellExecuteA` 调用 `runas` 动词
3. 系统弹出UAC对话框
4. 用户点击"是"后，应用以管理员身份重新启动
5. 原始进程退出

### Linux
- 检查是否为root用户（uid == 0）
- 如果不是root，显示错误信息并退出
- 用户需要手动使用 `sudo` 运行应用

### macOS
- 通常不需要root权限来修改DNS
- 如果需要特殊权限，会在运行时提示

## 用户体验

### Windows
1. 用户双击应用
2. 如果没有管理员权限，UAC对话框出现
3. 用户点击"是"
4. 应用以管理员身份启动

### Linux
1. 用户需要使用 `sudo` 运行应用
   ```bash
   sudo ./network-interface-manager
   ```

### macOS
1. 应用可以直接运行
2. 如果需要特殊权限，会在运行时提示

## 依赖

- `is_elevated`: 检查Windows管理员权限
- `winapi`: Windows API调用（仅Windows）
- `libc`: Unix系统调用（仅Linux/macOS）

## 注意事项

1. **UAC对话框**
   - 只在Windows上显示
   - 用户可以选择"否"来拒绝权限提升
   - 如果拒绝，应用会退出

2. **权限持久性**
   - 权限提升只对当前会话有效
   - 下次运行应用时需要重新提升

3. **开机自启**
   - 开机自启的应用需要以管理员身份运行
   - 在启动文件夹中的快捷方式应该配置为以管理员身份运行

4. **安全性**
   - 应用强制要求管理员权限
   - 这是修改系统DNS所必需的

## 故障排查

### UAC对话框不出现
1. 检查UAC是否被禁用
2. 检查应用是否已经以管理员身份运行
3. 查看应用日志中的错误信息

### 权限提升失败
1. 确保Windows UAC已启用
2. 检查用户账户是否有管理员权限
3. 尝试手动以管理员身份运行应用

### Linux权限问题
1. 使用 `sudo` 运行应用
2. 或者将应用添加到sudoers文件中（不推荐）
